---
import BlogPost from "./BlogPost.astro";
import { getCollection } from "astro:content";
const { shortlist } = Astro.props;

import "../styles/global.css";

const projectPosts = await getCollection("posts", ({ data }) => {
  return data.tags.includes("project");
});
---

<ul>
  {
    shortlist
      ? projectPosts
          .slice(0, shortlist)
          .map((post) => (
            <BlogPost
              tags={post.data.tags}
              url={"/posts/" + post.slug}
              title={post.data.title}
            />
          ))
      : projectPosts.map((post) => (
          <BlogPost
            url={"/posts/" + post.slug}
            title={post.data.title}
            image={post.data.image}
            pubDate={post.data.pubDate}
            description={post.data.description}
            tags={post.data.tags}
          />
        ))
  }
</ul>
